<!DOCTYPE html>
<html lang="zh-cn">

<head>
	<meta charset="UTF-8">
	<title>entry page</title>
	<script src="marked.min.js"></script>

	<script>
		var todayurl, tomorrowurl;

		window.onload = function () {
			if (document.domain == "hyg.codeberg.page") {
				todayurl = "https://hyg.codeberg.page/blog/@master/release/time/d." + datestr() + ".md";
				tomorrowurl = "https://hyg.codeberg.page/blog/@master/release/time/d." + datestr(1) + ".md";
			}else if (document.domain == "hyg.github.io") {
				todayurl = "http://hyg.github.io/blog/release/time/d." + datestr() + ".md";
				tomorrowurl = "http://hyg.github.io/blog/release/time/d." + datestr(1) + ".md";
			}else if (document.domain == "today.mars22.com") {
				todayurl = "http://today.mars22.com/blog/release/time/d." + datestr() + ".md";
				tomorrowurl = "http://today.mars22.com/blog/release/time/d." + datestr(1) + ".md";
			}
			
			getTextFileFromURL(todayurl, "today");
			getTextFileFromURL(tomorrowurl, "tomorrow");
		}

		function getTextFileFromURL(url, id) {
			var xmlhttp = new XMLHttpRequest();
			xmlhttp.onreadystatechange = function () {
				/* alert(xmlhttp.readyState);
				alert(xmlhttp.status);
				alert(xmlhttp.responseText); */
				if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
					var text = xmlhttp.responseText;
					document.getElementById(id).innerHTML = marked.parse(text);
				}
			};
			xmlhttp.open("GET", url, true);
			xmlhttp.send();
		}

		function datestr(diff = 0) {
			var theDate = new Date();
			theDate.setDate(theDate.getDate() + diff);

			var year = theDate.getFullYear();
			var month = theDate.getMonth() + 1 < 10 ? "0" + (theDate.getMonth() + 1) : theDate.getMonth() + 1;
			var day = theDate.getDate() < 10 ? "0" + theDate.getDate() : theDate.getDate();
			var dateStr = year + "" + month + "" + day;

			return dateStr;
		}
	</script>
</head>

<body>
	<div id="today"></div>
	<br /><br /><hr /><br /><br />
	<div id="tomorrow"></div>
</body>

</html>